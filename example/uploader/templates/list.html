{% extends 'base.html' %}

{% block main %}
  <div class="row">
    <div class="col">
      <h1 class="my-4">FileSystemStorage Example</h1>
    </div>
  </div>

  <div class="row mb-4">
    <div class="col">
      <form method="post" enctype="multipart/form-data">
        <div class="mb-3">
          <input class="form-control" type="file" name="file">
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
    </div>
  </div>

  <div class="row mb-4">
    <div class="col">
      <h2 class="mb-3">Uploaded files</h2>

      <table class="table table-striped align-middle">
        <tr>
          <th>URL</th>
          <th>Mime-Type</th>
          <th>Actions</th>
        </tr>
        {% for lookup, url, mimetype in files %}
          <tr>
            <td>
              <a href="{{ url }}">{{ url }}</a>
            </td>
            <td>
              {{ mimetype }}
            </td>
            <td>
              <form action="{{ url_for('.remove', lookup=lookup) }}" method="post">
                <button type="submit" class="btn btn-danger">Delete</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </table>
    </div>
  </div>
{% endblock main %}